#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include "Piece.h"
#include "Point.h"
#include "Yakinamasi.h"

extern std::string INPUT;

std::vector<Piece> parseInput(std::istream &in)
{
	std::vector<Piece> pieces;
	int n;
	in >> n;
	for (int i = 0; i < n; i++) {
		std::vector<Point> ps;
		int pn;
		in >> pn;
		for (int j = 0; j < pn; j++) {
			int x, y;
			in >> x >> y;
			ps.emplace_back(Point(x / 10, y / 10));
		}
		std::string gomi;
		std::getline(in, gomi);
		std::getline(in, gomi);
		std::getline(in, gomi);
		pieces.push_back(Piece(ps));
	}

	return pieces;
}


int main()
{
	std::cerr << "Wake Up! " << std::endl;

	std::stringstream ss;
	ss << INPUT;
	std::vector<Piece> ps = parseInput(ss);

	Yakinamasi yaki(10000, ps);
	yaki.yakinamasu();

	std::cerr << "I'll be back." << std::endl;
	std::getchar();

	return 0;
}

std::string INPUT{ R"(25
4
367 0 0 67 70 460 431 373
373.06567786383 399.18542057545 371.33542788159 378.45078940333
89.390048779036 90.246616446705 86.549693862893 93.813640911366
4
360 0 0 64 84 530 441 449
365.64463622485 473.51029555861 366.07376305876 456.24773972043
90.145622681413 89.862333665962 87.434810380156 92.557233272469
4
2189 265 2082 0 17 391 0 761
285.78663369724 2101.6912237529 370.39033464711 2244.4903653168
80.779372335125 101.26574440017 103.3524692598 74.602414004909
6
269 0 42 41 55 117 0 152 60 404 339 355
230.67292862406 77.103826104805 65.192024052026 259.04439773907 283.27018904219 361.83559802761
90.916462072415 90.531545257173 247.23546011849 109.0786945371 93.43138565516 88.806452359663
4
688 0 0 144 43 429 732 317
702.90824436764 288.22560607968 698.04369490742 320.03906011611
86.080748659173 93.241575565227 89.346988364614 91.330687410986
6
277 0 0 53 71 370 131 376 171 508 372 456
282.02482160264 324.85381327606 60.299253726725 137.92751719653 207.61743664731 465.79072554099
90.936474257046 88.207354668187 108.33505314429 247.43100809476 92.353625490542 92.736484345176
4
398 0 0 65 60 427 456 356
403.27286048035 366.93868697645 402.31455355232 360.69377593743
89.977941649863 89.864481500825 89.246253794311 90.911323055001
4
642 0 0 134 34 389 683 283
655.83534518963 257.25668115717 657.59942214087 285.95454184188
86.453776360247 94.195027244056 88.318531788369 91.032664607329
8
387 0 159 40 155 154 0 192 27 359 197 347 243 551 480 501
231.48218073968 114.07015385279 159.59009994357 169.16855499767 170.42300314218 209.12197397691 242.21684499638 509.55863254389
90.565419696593 101.96018050097 254.2154278673 94.59109906883 95.146208629867 261.33059711966 90.794089832916 91.396977283856
6
415 0 265 26 300 176 0 249 58 569 501 487
152.23665787188 154.02921800749 308.75394734319 325.21377584598 450.52524901497 494.5351352533
90.181127302532 86.699541657811 269.45784184092 93.402849823847 89.786485088306 90.472154286584
6
683 0 168 104 144 2 0 16 50 358 715 251
525.39604109662 104.78549517944 144.67895493125 345.63564630981 673.55326441195 253.0316185776
85.848579537826 268.17634744683 97.68754888215 87.23532178893 89.176974359815 91.875227984453
4
292 0 0 67 69 428 356 377
299.58805049601 367.53503234386 291.49614062625 382.39377609998
86.71180759674 92.102183873623 90.744462004992 90.441546524645
6
501 0 0 8 26 326 353 275 412 404 558 382
501.06386818449 319.06112267088 330.95316889252 141.85203558638 147.64823060233 386.22920656004
97.571929091282 86.240661207297 85.80954032272 254.28695641313 106.00852509544 90.082387870128
4
320 0 0 73 406 1662 691 1591
328.22096215812 1640.0478651552 293.71074205756 1633.6835678919
90.275362291922 88.517887899198 90.343872129094 90.862877679786
6
504 0 0 169 92 674 247 655 263 386 583 316
531.5797212084 513.31179608499 156.16017418023 269.47541631845 327.56678708318 325.7253444238
85.499041726472 98.212388108655 93.336323902816 100.39240677041 254.25699568124 88.3028438104
4
479 0 0 101 97 651 599 481
489.53242997783 558.48813774332 530.00377357147 495.74287690294
92.101470341629 91.904705052893 81.293601918768 94.70022268671
6
659 0 446 29 439 124 0 178 135 616 747 511
214.96511344867 95.257545632879 442.30871571788 458.33284848459 620.94202627943 518.52193781941
92.017980504498 101.96734039729 258.77327566719 79.882244283235 97.394927631339 89.964231516448
4
339 0 0 119 271 1670 531 1615
359.27983522597 1574.4973801185 265.75364531837 1626.3729584569
77.437084062053 99.431717198932 87.966834130978 95.164364608037
4
440 0 0 132 49 557 522 496
459.37348639206 427.81538074268 476.91718358642 502.73253326197
82.688132589028 100.12241664404 89.228291778687 87.961158988241
4
0 63 74 538 562 627 414 0
480.72965375562 496.04939270198 644.23054879445 418.76604446875
89.7976418204 109.1907394654 66.382900552894 94.628718161301
4
0 0 96 538 575 442 487 88
546.49794144169 488.52533199416 364.77390257528 494.88685575594
69.639985624626 88.784365990209 87.372881271931 114.20276711323
8
420 0 0 78 91 571 509 500 475 305 310 318 282 134 437 98
427.18146027186 501.32823578969 423.98702810346 197.94191067078 165.51132891739 186.11824198611 159.12573644763 99.463561166892
89.32034744576 90.062604278479 90.818128177917 89.749446915721 95.385698078151 265.85236507249 265.57696069202 93.234449339455
4
259 0 0 47 44 306 303 261
263.22993750712 262.71086768537 262.88020085202 264.6828290615
89.28370643159 90.643782949221 89.785124204364 90.287386414825
4
474 0 0 59 43 449 549 434
477.65782731993 392.36335200933 506.22228319188 440.43274174384
92.709250139244 90.80344636749 94.593819456943 81.893484036322
8
329 0 0 81 29 205 93 228 222 810 167 843 190 914 487 856
338.82443831577 127.34598540983 68.007352543677 596.12498689453 64.140470843298 74.632432628181 302.61031046546 870.45964869143
86.626740313363 90.667944640134 122.93040116649 23
		
)" };